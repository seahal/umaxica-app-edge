var dn=Object.defineProperty;var Ut=e=>{throw TypeError(e)};var gn=(e,t,r)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var x=(e,t,r)=>gn(e,typeof t!="symbol"?t+"":t,r),dt=(e,t,r)=>t.has(e)||Ut("Cannot "+r);var l=(e,t,r)=>(dt(e,t,"read from private field"),r?r.call(e):t.get(e)),P=(e,t,r)=>t.has(e)?Ut("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),y=(e,t,r,n)=>(dt(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),O=(e,t,r)=>(dt(e,t,"access private method"),r);var Wt=(e,t,r,n)=>({set _(s){y(e,t,s,r)},get _(){return l(e,t,n)}});var Pr={Stringify:1},I=(e,t)=>{const r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},pn=/[&<>'"]/,Or=async(e,t)=>{let r="";t||(t=[]);const n=await Promise.all(e);for(let s=n.length-1;r+=n[s],s--,!(s<0);s--){let i=n[s];typeof i=="object"&&t.push(...i.callbacks||[]);const o=i.isEscaped;if(i=await(typeof i=="object"?i.toString():i),typeof i=="object"&&t.push(...i.callbacks||[]),i.isEscaped??o)r+=i;else{const a=[r];oe(i,a),r=a[0]}}return I(r,t)},oe=(e,t)=>{const r=e.search(pn);if(r===-1){t[0]+=e;return}let n,s,i=0;for(s=r;s<e.length;s++){switch(e.charCodeAt(s)){case 34:n="&quot;";break;case 39:n="&#39;";break;case 38:n="&amp;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}t[0]+=e.substring(i,s)+n,i=s+1}t[0]+=e.substring(i,s)},Sr=e=>{const t=e.callbacks;if(!(t!=null&&t.length))return e;const r=[e],n={};return t.forEach(s=>s({phase:Pr.Stringify,buffer:r,context:n})),r[0]},Cr=async(e,t,r,n,s)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const i=e.callbacks;return i!=null&&i.length?(s?s[0]+=e:s=[e],Promise.all(i.map(a=>a({phase:t,buffer:s,context:n}))).then(a=>Promise.all(a.filter(Boolean).map(c=>Cr(c,t,!1,n,s))).then(()=>s[0]))):Promise.resolve(e)},mn=(e,...t)=>{const r=[""];for(let n=0,s=e.length-1;n<s;n++){r[0]+=e[n];const i=Array.isArray(t[n])?t[n].flat(1/0):[t[n]];for(let o=0,a=i.length;o<a;o++){const c=i[o];if(typeof c=="string")oe(c,r);else if(typeof c=="number")r[0]+=c;else{if(typeof c=="boolean"||c===null||c===void 0)continue;if(typeof c=="object"&&c.isEscaped)if(c.callbacks)r.unshift("",c);else{const u=c.toString();u instanceof Promise?r.unshift("",u):r[0]+=u}else c instanceof Promise?r.unshift("",c):oe(c.toString(),r)}}}return r[0]+=e.at(-1),r.length===1?"callbacks"in r?I(Sr(I(r[0],r.callbacks))):I(r[0]):Or(r,r.callbacks)},Lt=Symbol("RENDERER"),St=Symbol("ERROR_HANDLER"),k=Symbol("STASH"),Ar=Symbol("INTERNAL"),yn=Symbol("MEMO"),nt=Symbol("PERMALINK"),zt=e=>(e[Ar]=!0,e),Rr=e=>({value:t,children:r})=>{if(!r)return;const n={children:[{tag:zt(()=>{e.push(t)}),props:{}}]};Array.isArray(r)?n.children.push(...r.flat()):n.children.push(r),n.children.push({tag:zt(()=>{e.pop()}),props:{}});const s={tag:"",props:n,type:""};return s[St]=i=>{throw e.pop(),i},s},kr=e=>{const t=[e],r=Rr(t);return r.values=t,r.Provider=r,Oe.push(r),r},Oe=[],$r=e=>{const t=[e],r=n=>{t.push(n.value);let s;try{s=n.children?(Array.isArray(n.children)?new Nr("",{},n.children):n.children).toString():""}finally{t.pop()}return s instanceof Promise?s.then(i=>I(i,i.callbacks)):I(s)};return r.values=t,r.Provider=r,r[Lt]=Rr(t),Oe.push(r),r},Ae=e=>e.values.at(-1),Ge={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},Ct={},Ze="data-precedence",Be=e=>Array.isArray(e)?e:[e],Vt=new WeakMap,Kt=(e,t,r,n)=>({buffer:s,context:i})=>{if(!s)return;const o=Vt.get(i)||{};Vt.set(i,o);const a=o[e]||(o[e]=[]);let c=!1;const u=Ge[e];if(u.length>0){e:for(const[,f]of a)for(const h of u)if(((f==null?void 0:f[h])??null)===(r==null?void 0:r[h])){c=!0;break e}}if(c?s[0]=s[0].replaceAll(t,""):u.length>0?a.push([t,r,n]):a.unshift([t,r,n]),s[0].indexOf("</head>")!==-1){let f;if(n===void 0)f=a.map(([h])=>h);else{const h=[];f=a.map(([d,,p])=>{let g=h.indexOf(p);return g===-1&&(h.push(p),g=h.length-1),[d,g]}).sort((d,p)=>d[1]-p[1]).map(([d])=>d)}f.forEach(h=>{s[0]=s[0].replaceAll(h,"")}),s[0]=s[0].replace(/(?=<\/head>)/,f.join(""))}},Ue=(e,t,r)=>I(new W(e,r,Be(t??[])).toString()),We=(e,t,r,n)=>{if("itemProp"in r)return Ue(e,t,r);let{precedence:s,blocking:i,...o}=r;s=n?s??"":void 0,n&&(o[Ze]=s);const a=new W(e,o,Be(t||[])).toString();return a instanceof Promise?a.then(c=>I(a,[...c.callbacks||[],Kt(e,c,o,s)])):I(a,[Kt(e,a,o,s)])},vn=({children:e,...t})=>{const r=Tt();if(r){const n=Ae(r);if(n==="svg"||n==="head")return new W("title",t,Be(e??[]))}return We("title",e,t,!1)},wn=({children:e,...t})=>{const r=Tt();return["src","async"].some(n=>!t[n])||r&&Ae(r)==="head"?Ue("script",e,t):We("script",e,t,!1)},xn=({children:e,...t})=>["href","precedence"].every(r=>r in t)?(t["data-href"]=t.href,delete t.href,We("style",e,t,!0)):Ue("style",e,t),En=({children:e,...t})=>["onLoad","onError"].some(r=>r in t)||t.rel==="stylesheet"&&(!("precedence"in t)||"disabled"in t)?Ue("link",e,t):We("link",e,t,"precedence"in t),bn=({children:e,...t})=>{const r=Tt();return r&&Ae(r)==="head"?Ue("meta",e,t):We("meta",e,t,!1)},jr=(e,{children:t,...r})=>new W(e,r,Be(t??[])),Pn=e=>(typeof e.action=="function"&&(e.action=nt in e.action?e.action[nt]:void 0),jr("form",e)),Lr=(e,t)=>(typeof t.formAction=="function"&&(t.formAction=nt in t.formAction?t.formAction[nt]:void 0),jr(e,t)),On=e=>Lr("input",e),Sn=e=>Lr("button",e);const gt=Object.freeze(Object.defineProperty({__proto__:null,button:Sn,form:Pn,input:On,link:En,meta:bn,script:wn,style:xn,title:vn},Symbol.toStringTag,{value:"Module"}));var Cn=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),st=e=>Cn.get(e)||e,Tr=(e,t)=>{for(const[r,n]of Object.entries(e)){const s=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`);t(s,n==null?null:typeof n=="number"?s.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${n}`:`${n}px`:n)}},Te=void 0,Tt=()=>Te,An=e=>/[A-Z]/.test(e)&&e.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?e.replace(/([A-Z])/g,"-$1").toLowerCase():e,Rn=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],kn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Nt=(e,t)=>{for(let r=0,n=e.length;r<n;r++){const s=e[r];if(typeof s=="string")oe(s,t);else{if(typeof s=="boolean"||s===null||s===void 0)continue;s instanceof W?s.toStringToBuffer(t):typeof s=="number"||s.isEscaped?t[0]+=s:s instanceof Promise?t.unshift("",s):Nt(s,t)}}},W=class{constructor(e,t,r){x(this,"tag");x(this,"props");x(this,"key");x(this,"children");x(this,"isEscaped",!0);x(this,"localContexts");this.tag=e,this.props=t,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){var t,r;const e=[""];(t=this.localContexts)==null||t.forEach(([n,s])=>{n.values.push(s)});try{this.toStringToBuffer(e)}finally{(r=this.localContexts)==null||r.forEach(([n])=>{n.values.pop()})}return e.length===1?"callbacks"in e?Sr(I(e[0],e.callbacks)).toString():e[0]:Or(e,e.callbacks)}toStringToBuffer(e){const t=this.tag,r=this.props;let{children:n}=this;e[0]+=`<${t}`;const s=Te&&Ae(Te)==="svg"?i=>An(st(i)):i=>st(i);for(let[i,o]of Object.entries(r))if(i=s(i),i!=="children"){if(i==="style"&&typeof o=="object"){let a="";Tr(o,(c,u)=>{u!=null&&(a+=`${a?";":""}${c}:${u}`)}),e[0]+=' style="',oe(a,e),e[0]+='"'}else if(typeof o=="string")e[0]+=` ${i}="`,oe(o,e),e[0]+='"';else if(o!=null)if(typeof o=="number"||o.isEscaped)e[0]+=` ${i}="${o}"`;else if(typeof o=="boolean"&&kn.includes(i))o&&(e[0]+=` ${i}=""`);else if(i==="dangerouslySetInnerHTML"){if(n.length>0)throw"Can only set one of `children` or `props.dangerouslySetInnerHTML`.";n=[I(o.__html)]}else if(o instanceof Promise)e[0]+=` ${i}="`,e.unshift('"',o);else if(typeof o=="function"){if(!i.startsWith("on"))throw`Invalid prop '${i}' of type 'function' supplied to '${t}'.`}else e[0]+=` ${i}="`,oe(o.toString(),e),e[0]+='"'}if(Rn.includes(t)&&n.length===0){e[0]+="/>";return}e[0]+=">",Nt(n,e),e[0]+=`</${t}>`}},pt=class extends W{toStringToBuffer(e){const{children:t}=this,r=this.tag.call(null,{...this.props,children:t.length<=1?t[0]:t});if(!(typeof r=="boolean"||r==null))if(r instanceof Promise)if(Oe.length===0)e.unshift("",r);else{const n=Oe.map(s=>[s,s.values.at(-1)]);e.unshift("",r.then(s=>(s instanceof W&&(s.localContexts=n),s)))}else r instanceof W?r.toStringToBuffer(e):typeof r=="number"||r.isEscaped?(e[0]+=r,r.callbacks&&(e.callbacks||(e.callbacks=[]),e.callbacks.push(...r.callbacks))):oe(r,e)}},Nr=class extends W{toStringToBuffer(e){Nt(this.children,e)}},Xt=(e,t,...r)=>{t??(t={}),r.length&&(t.children=r.length===1?r[0]:r);const n=t.key;delete t.key;const s=Je(e,t,r);return s.key=n,s},Gt=!1,Je=(e,t,r)=>{if(!Gt){for(const n in Ct)gt[n][Lt]=Ct[n];Gt=!0}return typeof e=="function"?new pt(e,t,r):gt[e]?new pt(gt[e],t,r):e==="svg"||e==="head"?(Te||(Te=$r("")),new W(e,t,[new pt(Te,{value:e},r)])):new W(e,t,r)},Dr=({children:e})=>new Nr("",{children:e},Array.isArray(e)?e:e?[e]:[]);function v(e,t,r){let n;if(!t||!("children"in t))n=Je(e,t,[]);else{const s=t.children;n=Array.isArray(s)?Je(e,t,s):Je(e,t,[s])}return n.key=r,n}var Zt=(e,t,r)=>(n,s)=>{let i=-1;return o(0);async function o(a){if(a<=i)throw new Error("next() called multiple times");i=a;let c,u=!1,f;if(e[a]?(f=e[a][0][0],n.req.routeIndex=a):f=a===e.length&&s||void 0,f)try{c=await f(n,()=>o(a+1))}catch(h){if(h instanceof Error&&t)n.error=h,c=await t(h,n),u=!0;else throw h}else n.finalized===!1&&r&&(c=await r(n));return c&&(n.finalized===!1||u)&&(n.res=c),n}},$n=async(e,t=Object.create(null))=>{const{all:r=!1,dot:n=!1}=t,i=(e instanceof Fr?e.raw.headers:e.headers).get("Content-Type");return i!=null&&i.startsWith("multipart/form-data")||i!=null&&i.startsWith("application/x-www-form-urlencoded")?jn(e,{all:r,dot:n}):{}};async function jn(e,t){const r=await e.formData();return r?Ln(r,t):{}}function Ln(e,t){const r=Object.create(null);return e.forEach((n,s)=>{t.all||s.endsWith("[]")?Tn(r,s,n):r[s]=n}),t.dot&&Object.entries(r).forEach(([n,s])=>{n.includes(".")&&(Nn(r,n,s),delete r[n])}),r}var Tn=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:e[t]=r},Nn=(e,t,r)=>{let n=e;const s=t.split(".");s.forEach((i,o)=>{o===s.length-1?n[i]=r:((!n[i]||typeof n[i]!="object"||Array.isArray(n[i])||n[i]instanceof File)&&(n[i]=Object.create(null)),n=n[i])})},Hr=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},Dn=e=>{const{groups:t,path:r}=Hn(e),n=Hr(r);return Mn(n,t)},Hn=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(r,n)=>{const s=`@${n}`;return t.push([s,r]),s}),{groups:t,path:e}},Mn=(e,t)=>{for(let r=t.length-1;r>=0;r--){const[n]=t[r];for(let s=e.length-1;s>=0;s--)if(e[s].includes(n)){e[s]=e[s].replace(n,t[r][1]);break}}return e},Ke={},Jt=(e,t)=>{if(e==="*")return"*";const r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){const n=`${e}#${t}`;return Ke[n]||(r[2]?Ke[n]=t&&t[0]!==":"&&t[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:Ke[n]=[e,r[1],!0]),Ke[n]}return null},Mr=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},_n=e=>Mr(e,decodeURI),_r=e=>{const t=e.url,r=t.indexOf("/",8);let n=r;for(;n<t.length;n++){const s=t.charCodeAt(n);if(s===37){const i=t.indexOf("?",n),o=t.slice(r,i===-1?void 0:i);return _n(o.includes("%25")?o.replace(/%25/g,"%2525"):o)}else if(s===63)break}return t.slice(r,n)},In=e=>{const t=_r(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},ve=(e,t,...r)=>(r.length&&(t=ve(t,...r)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),Dt=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),r=[];let n="";return t.forEach(s=>{if(s!==""&&!/\:/.test(s))n+="/"+s;else if(/\:/.test(s))if(/\?/.test(s)){r.length===0&&n===""?r.push("/"):r.push(n);const i=s.replace("?","");n+="/"+i,r.push(n)}else n+="/"+s}),r.filter((s,i,o)=>o.indexOf(s)===i)},mt=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?Ht(e):e):e,Ir=(e,t,r)=>{let n;if(!r&&t&&!/[%+]/.test(t)){let o=e.indexOf(`?${t}`,8);for(o===-1&&(o=e.indexOf(`&${t}`,8));o!==-1;){const a=e.charCodeAt(o+t.length+1);if(a===61){const c=o+t.length+2,u=e.indexOf("&",c);return mt(e.slice(c,u===-1?void 0:u))}else if(a==38||isNaN(a))return"";o=e.indexOf(`&${t}`,o+1)}if(n=/[%+]/.test(e),!n)return}const s={};n??(n=/[%+]/.test(e));let i=e.indexOf("?",8);for(;i!==-1;){const o=e.indexOf("&",i+1);let a=e.indexOf("=",i);a>o&&o!==-1&&(a=-1);let c=e.slice(i+1,a===-1?o===-1?void 0:o:a);if(n&&(c=mt(c)),i=o,c==="")continue;let u;a===-1?u="":(u=e.slice(a+1,o===-1?void 0:o),n&&(u=mt(u))),r?(s[c]&&Array.isArray(s[c])||(s[c]=[]),s[c].push(u)):s[c]??(s[c]=u)}return t?s[t]:s},Fn=Ir,qn=(e,t)=>Ir(e,t,!0),Ht=decodeURIComponent,Qt=e=>Mr(e,Ht),we,F,Y,qr,Br,At,te,dr,Fr=(dr=class{constructor(e,t="/",r=[[]]){P(this,Y);x(this,"raw");P(this,we);P(this,F);x(this,"routeIndex",0);x(this,"path");x(this,"bodyCache",{});P(this,te,e=>{const{bodyCache:t,raw:r}=this,n=t[e];if(n)return n;const s=Object.keys(t)[0];return s?t[s].then(i=>(s==="json"&&(i=JSON.stringify(i)),new Response(i)[e]())):t[e]=r[e]()});this.raw=e,this.path=t,y(this,F,r),y(this,we,{})}param(e){return e?O(this,Y,qr).call(this,e):O(this,Y,Br).call(this)}query(e){return Fn(this.url,e)}queries(e){return qn(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((r,n)=>{t[n]=r}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await $n(this,e))}json(){return l(this,te).call(this,"json")}text(){return l(this,te).call(this,"text")}arrayBuffer(){return l(this,te).call(this,"arrayBuffer")}blob(){return l(this,te).call(this,"blob")}formData(){return l(this,te).call(this,"formData")}addValidatedData(e,t){l(this,we)[e]=t}valid(e){return l(this,we)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return l(this,F)[0].map(([[,e]])=>e)}get routePath(){return l(this,F)[0].map(([[,e]])=>e)[this.routeIndex].path}},we=new WeakMap,F=new WeakMap,Y=new WeakSet,qr=function(e){const t=l(this,F)[0][this.routeIndex][1][e],r=O(this,Y,At).call(this,t);return r?/\%/.test(r)?Qt(r):r:void 0},Br=function(){const e={},t=Object.keys(l(this,F)[0][this.routeIndex][1]);for(const r of t){const n=O(this,Y,At).call(this,l(this,F)[0][this.routeIndex][1][r]);n&&typeof n=="string"&&(e[r]=/\%/.test(n)?Qt(n):n)}return e},At=function(e){return l(this,F)[1]?l(this,F)[1][e]:e},te=new WeakMap,dr),Bn="text/plain; charset=UTF-8",yt=(e,t={})=>{for(const r of Object.keys(t))e.set(r,t[r]);return e},He,Me,X,fe,G,R,$,M,Z,_e,xe,Ee,Ie,Fe,H,_,gr,Un=(gr=class{constructor(e,t){P(this,H);P(this,He);P(this,Me);x(this,"env",{});P(this,X);x(this,"finalized",!1);x(this,"error");P(this,fe,200);P(this,G);P(this,R);P(this,$);P(this,M);P(this,Z,!0);P(this,_e);P(this,xe);P(this,Ee);P(this,Ie);P(this,Fe);x(this,"render",(...e)=>(l(this,xe)??y(this,xe,t=>this.html(t)),l(this,xe).call(this,...e)));x(this,"setLayout",e=>y(this,_e,e));x(this,"getLayout",()=>l(this,_e));x(this,"setRenderer",e=>{y(this,xe,e)});x(this,"header",(e,t,r)=>{if(this.finalized&&y(this,M,new Response(l(this,M).body,l(this,M))),t===void 0){l(this,R)?l(this,R).delete(e):l(this,$)&&delete l(this,$)[e.toLocaleLowerCase()],this.finalized&&this.res.headers.delete(e);return}r!=null&&r.append?(l(this,R)||(y(this,Z,!1),y(this,R,new Headers(l(this,$))),y(this,$,{})),l(this,R).append(e,t)):l(this,R)?l(this,R).set(e,t):(l(this,$)??y(this,$,{}),l(this,$)[e.toLowerCase()]=t),this.finalized&&(r!=null&&r.append?this.res.headers.append(e,t):this.res.headers.set(e,t))});x(this,"status",e=>{y(this,Z,!1),y(this,fe,e)});x(this,"set",(e,t)=>{l(this,X)??y(this,X,new Map),l(this,X).set(e,t)});x(this,"get",e=>l(this,X)?l(this,X).get(e):void 0);x(this,"newResponse",(...e)=>O(this,H,_).call(this,...e));x(this,"body",(e,t,r)=>typeof t=="number"?O(this,H,_).call(this,e,t,r):O(this,H,_).call(this,e,t));x(this,"text",(e,t,r)=>{if(!l(this,$)){if(l(this,Z)&&!r&&!t)return new Response(e);y(this,$,{})}return l(this,$)["content-type"]=Bn,typeof t=="number"?O(this,H,_).call(this,e,t,r):O(this,H,_).call(this,e,t)});x(this,"json",(e,t,r)=>{const n=JSON.stringify(e);return l(this,$)??y(this,$,{}),l(this,$)["content-type"]="application/json",typeof t=="number"?O(this,H,_).call(this,n,t,r):O(this,H,_).call(this,n,t)});x(this,"html",(e,t,r)=>(l(this,$)??y(this,$,{}),l(this,$)["content-type"]="text/html; charset=UTF-8",typeof e=="object"?Cr(e,Pr.Stringify,!1,{}).then(n=>typeof t=="number"?O(this,H,_).call(this,n,t,r):O(this,H,_).call(this,n,t)):typeof t=="number"?O(this,H,_).call(this,e,t,r):O(this,H,_).call(this,e,t)));x(this,"redirect",(e,t)=>(l(this,R)??y(this,R,new Headers),l(this,R).set("Location",String(e)),this.newResponse(null,t??302)));x(this,"notFound",()=>(l(this,Ee)??y(this,Ee,()=>new Response),l(this,Ee).call(this,this)));y(this,He,e),t&&(y(this,G,t.executionCtx),this.env=t.env,y(this,Ee,t.notFoundHandler),y(this,Fe,t.path),y(this,Ie,t.matchResult))}get req(){return l(this,Me)??y(this,Me,new Fr(l(this,He),l(this,Fe),l(this,Ie))),l(this,Me)}get event(){if(l(this,G)&&"respondWith"in l(this,G))return l(this,G);throw Error("This context has no FetchEvent")}get executionCtx(){if(l(this,G))return l(this,G);throw Error("This context has no ExecutionContext")}get res(){return y(this,Z,!1),l(this,M)||y(this,M,new Response("404 Not Found",{status:404}))}set res(e){if(y(this,Z,!1),l(this,M)&&e){e=new Response(e.body,e);for(const[t,r]of l(this,M).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const n=l(this,M).headers.getSetCookie();e.headers.delete("set-cookie");for(const s of n)e.headers.append("set-cookie",s)}else e.headers.set(t,r)}y(this,M,e),this.finalized=!0}get var(){return l(this,X)?Object.fromEntries(l(this,X)):{}}},He=new WeakMap,Me=new WeakMap,X=new WeakMap,fe=new WeakMap,G=new WeakMap,R=new WeakMap,$=new WeakMap,M=new WeakMap,Z=new WeakMap,_e=new WeakMap,xe=new WeakMap,Ee=new WeakMap,Ie=new WeakMap,Fe=new WeakMap,H=new WeakSet,_=function(e,t,r){if(l(this,Z)&&!r&&!t&&l(this,fe)===200)return new Response(e,{headers:l(this,$)});if(t&&typeof t!="number"){const s=new Headers(t.headers);l(this,R)&&l(this,R).forEach((o,a)=>{a==="set-cookie"?s.append(a,o):s.set(a,o)});const i=yt(s,l(this,$));return new Response(e,{headers:i,status:t.status??l(this,fe)})}const n=typeof t=="number"?t:l(this,fe);l(this,$)??y(this,$,{}),l(this,R)??y(this,R,new Headers),yt(l(this,R),l(this,$)),l(this,M)&&(l(this,M).headers.forEach((s,i)=>{var o,a;i==="set-cookie"?(o=l(this,R))==null||o.append(i,s):(a=l(this,R))==null||a.set(i,s)}),yt(l(this,R),l(this,$))),r??(r={});for(const[s,i]of Object.entries(r))if(typeof i=="string")l(this,R).set(s,i);else{l(this,R).delete(s);for(const o of i)l(this,R).append(s,o)}return new Response(e,{status:n,headers:l(this,R)})},gr),j="ALL",Wn="all",zn=["get","post","put","delete","options","patch"],Ur="Can not add a route since the matcher is already built.",Mt=class extends Error{},Vn="__COMPOSED_HANDLER",Kn=e=>e.text("404 Not Found",404),Yt=(e,t)=>{if("getResponse"in e){const r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},q,L,Wr,B,le,Qe,Ye,pr,_t=(pr=class{constructor(t={}){P(this,L);x(this,"get");x(this,"post");x(this,"put");x(this,"delete");x(this,"options");x(this,"patch");x(this,"all");x(this,"on");x(this,"use");x(this,"router");x(this,"getPath");x(this,"_basePath","/");P(this,q,"/");x(this,"routes",[]);P(this,B,Kn);x(this,"errorHandler",Yt);x(this,"onError",t=>(this.errorHandler=t,this));x(this,"notFound",t=>(y(this,B,t),this));x(this,"fetch",(t,...r)=>O(this,L,Ye).call(this,t,r[1],r[0],t.method));x(this,"request",(t,r,n,s)=>t instanceof Request?this.fetch(r?new Request(t,r):t,n,s):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${ve("/",t)}`,r),n,s)));x(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(O(this,L,Ye).call(this,t.request,t,void 0,t.request.method))})});[...zn,Wn].forEach(i=>{this[i]=(o,...a)=>(typeof o=="string"?y(this,q,o):O(this,L,le).call(this,i,l(this,q),o),a.forEach(c=>{O(this,L,le).call(this,i,l(this,q),c)}),this)}),this.on=(i,o,...a)=>{for(const c of[o].flat()){y(this,q,c);for(const u of[i].flat())a.map(f=>{O(this,L,le).call(this,u.toUpperCase(),l(this,q),f)})}return this},this.use=(i,...o)=>(typeof i=="string"?y(this,q,i):(y(this,q,"*"),o.unshift(i)),o.forEach(a=>{O(this,L,le).call(this,j,l(this,q),a)}),this);const{strict:n,...s}=t;Object.assign(this,s),this.getPath=n??!0?t.getPath??_r:In}route(t,r){const n=this.basePath(t);return r.routes.map(s=>{var o;let i;r.errorHandler===Yt?i=s.handler:(i=async(a,c)=>(await Zt([],r.errorHandler)(a,()=>s.handler(a,c))).res,i[Vn]=s.handler),O(o=n,L,le).call(o,s.method,s.path,i)}),this}basePath(t){const r=O(this,L,Wr).call(this);return r._basePath=ve(this._basePath,t),r}mount(t,r,n){let s,i;n&&(typeof n=="function"?i=n:(i=n.optionHandler,n.replaceRequest===!1?s=c=>c:s=n.replaceRequest));const o=i?c=>{const u=i(c);return Array.isArray(u)?u:[u]}:c=>{let u;try{u=c.executionCtx}catch{}return[c.env,u]};s||(s=(()=>{const c=ve(this._basePath,t),u=c==="/"?0:c.length;return f=>{const h=new URL(f.url);return h.pathname=h.pathname.slice(u)||"/",new Request(h,f)}})());const a=async(c,u)=>{const f=await r(s(c.req.raw),...o(c));if(f)return f;await u()};return O(this,L,le).call(this,j,ve(t,"*"),a),this}},q=new WeakMap,L=new WeakSet,Wr=function(){const t=new _t({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,y(t,B,l(this,B)),t.routes=this.routes,t},B=new WeakMap,le=function(t,r,n){t=t.toUpperCase(),r=ve(this._basePath,r);const s={path:r,method:t,handler:n};this.router.add(t,r,[n,s]),this.routes.push(s)},Qe=function(t,r){if(t instanceof Error)return this.errorHandler(t,r);throw t},Ye=function(t,r,n,s){if(s==="HEAD")return(async()=>new Response(null,await O(this,L,Ye).call(this,t,r,n,"GET")))();const i=this.getPath(t,{env:n}),o=this.router.match(s,i),a=new Un(t,{path:i,matchResult:o,env:n,executionCtx:r,notFoundHandler:l(this,B)});if(o[0].length===1){let u;try{u=o[0][0][0][0](a,async()=>{a.res=await l(this,B).call(this,a)})}catch(f){return O(this,L,Qe).call(this,f,a)}return u instanceof Promise?u.then(f=>f||(a.finalized?a.res:l(this,B).call(this,a))).catch(f=>O(this,L,Qe).call(this,f,a)):u??l(this,B).call(this,a)}const c=Zt(o[0],this.errorHandler,l(this,B));return(async()=>{try{const u=await c(a);if(!u.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return u.res}catch(u){return O(this,L,Qe).call(this,u,a)}})()},pr),vt=Object.create(null),Xn=/\/(:\w+(?:{(?:(?:{[\d,]+})|[^}])+})?)|\/[^\/\?]+|(\?)/g,Gn=/\*/,be,mr,Zn=(mr=class{constructor(){x(this,"name","LinearRouter");P(this,be,[])}add(e,t,r){for(let n=0,s=Dt(t)||[t],i=s.length;n<i;n++)l(this,be).push([e,s[n],r])}match(e,t){const r=[];e:for(let n=0,s=l(this,be).length;n<s;n++){const[i,o,a]=l(this,be)[n];if(i===e||i===j){if(o==="*"||o==="/*"){r.push([a,vt]);continue}const c=o.indexOf("*")!==-1,u=o.indexOf(":")!==-1;if(!c&&!u)(o===t||o+"/"===t)&&r.push([a,vt]);else if(c&&!u){const f=o.charCodeAt(o.length-1)===42,h=(f?o.slice(0,-2):o).split(Gn),d=h.length-1;for(let p=0,g=0,w=h.length;p<w;p++){const m=h[p];if(t.indexOf(m,g)!==g)continue e;if(g+=m.length,p===d){if(!f&&g!==t.length&&!(g===t.length-1&&t.charCodeAt(g)===47))continue e}else{const b=t.indexOf("/",g);if(b===-1)continue e;g=b}}r.push([a,vt])}else if(u&&!c){const f=Object.create(null),h=o.match(Xn),d=h.length-1;for(let p=0,g=0,w=h.length;p<w;p++){if(g===-1||g>=t.length)continue e;const m=h[p];if(m.charCodeAt(1)===58){let E=m.slice(2),b;if(E.charCodeAt(E.length-1)===125){const S=E.indexOf("{"),C=h[p+1],A=C&&C[1]!==":"&&C[1]!=="*"?`(?=${C})`:"",ae=E.slice(S+1,-1)+A,ce=t.slice(g+1),z=new RegExp(ae,"d").exec(ce);if(!z||z.indices[0][0]!==0||z.indices[0][1]===0)continue e;E=E.slice(0,S),b=ce.slice(...z.indices[0]),g+=z.indices[0][1]+1}else{let S=t.indexOf("/",g+1);if(S===-1){if(g+1===t.length)continue e;S=t.length}b=t.slice(g+1,S),g=S}f[E]||(f[E]=b)}else{if(t.indexOf(m,g)!==g)continue e;g+=m.length}if(p===d&&g!==t.length&&!(g===t.length-1&&t.charCodeAt(g)===47))continue e}r.push([a,f])}else if(u&&c)throw new Mt}}return[r]}},be=new WeakMap,mr),re,J,yr,zr=(yr=class{constructor(e){x(this,"name","SmartRouter");P(this,re,[]);P(this,J,[]);y(this,re,e.routers)}add(e,t,r){if(!l(this,J))throw new Error(Ur);l(this,J).push([e,t,r])}match(e,t){if(!l(this,J))throw new Error("Fatal error");const r=l(this,re),n=l(this,J),s=r.length;let i=0,o;for(;i<s;i++){const a=r[i];try{for(let c=0,u=n.length;c<u;c++)a.add(...n[c]);o=a.match(e,t)}catch(c){if(c instanceof Mt)continue;throw c}this.match=a.match.bind(a),y(this,re,[a]),y(this,J,void 0);break}if(i===s)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,o}get activeRouter(){if(l(this,J)||l(this,re).length!==1)throw new Error("No active router has been determined yet.");return l(this,re)[0]}},re=new WeakMap,J=new WeakMap,yr),Re=Object.create(null),ne,D,he,Pe,N,Q,ue,vr,Vr=(vr=class{constructor(t,r,n){P(this,Q);P(this,ne);P(this,D);P(this,he);P(this,Pe,0);P(this,N,Re);if(y(this,D,n||Object.create(null)),y(this,ne,[]),t&&r){const s=Object.create(null);s[t]={handler:r,possibleKeys:[],score:0},y(this,ne,[s])}y(this,he,[])}insert(t,r,n){y(this,Pe,++Wt(this,Pe)._);let s=this;const i=Dn(r),o=[];for(let u=0,f=i.length;u<f;u++){const h=i[u],d=i[u+1],p=Jt(h,d),g=Array.isArray(p)?p[0]:h;if(Object.keys(l(s,D)).includes(g)){s=l(s,D)[g];const w=Jt(h,d);w&&o.push(w[1]);continue}l(s,D)[g]=new Vr,p&&(l(s,he).push(p),o.push(p[1])),s=l(s,D)[g]}const a=Object.create(null),c={handler:n,possibleKeys:o.filter((u,f,h)=>h.indexOf(u)===f),score:l(this,Pe)};return a[t]=c,l(s,ne).push(a),s}search(t,r){var c;const n=[];y(this,N,Re);let i=[this];const o=Hr(r),a=[];for(let u=0,f=o.length;u<f;u++){const h=o[u],d=u===f-1,p=[];for(let g=0,w=i.length;g<w;g++){const m=i[g],E=l(m,D)[h];E&&(y(E,N,l(m,N)),d?(l(E,D)["*"]&&n.push(...O(this,Q,ue).call(this,l(E,D)["*"],t,l(m,N))),n.push(...O(this,Q,ue).call(this,E,t,l(m,N)))):p.push(E));for(let b=0,S=l(m,he).length;b<S;b++){const C=l(m,he)[b],A=l(m,N)===Re?{}:{...l(m,N)};if(C==="*"){const ee=l(m,D)["*"];ee&&(n.push(...O(this,Q,ue).call(this,ee,t,l(m,N))),y(ee,N,A),p.push(ee));continue}if(h==="")continue;const[ae,ce,z]=C,V=l(m,D)[ae],hn=o.slice(u).join("/");if(z instanceof RegExp){const ee=z.exec(hn);if(ee){if(A[ce]=ee[0],n.push(...O(this,Q,ue).call(this,V,t,l(m,N),A)),Object.keys(l(V,D)).length){y(V,N,A);const ht=((c=ee[0].match(/\//))==null?void 0:c.length)??0;(a[ht]||(a[ht]=[])).push(V)}continue}}(z===!0||z.test(h))&&(A[ce]=h,d?(n.push(...O(this,Q,ue).call(this,V,t,A,l(m,N))),l(V,D)["*"]&&n.push(...O(this,Q,ue).call(this,l(V,D)["*"],t,A,l(m,N)))):(y(V,N,A),p.push(V)))}}i=p.concat(a.shift()??[])}return n.length>1&&n.sort((u,f)=>u.score-f.score),[n.map(({handler:u,params:f})=>[u,f])]}},ne=new WeakMap,D=new WeakMap,he=new WeakMap,Pe=new WeakMap,N=new WeakMap,Q=new WeakSet,ue=function(t,r,n,s){const i=[];for(let o=0,a=l(t,ne).length;o<a;o++){const c=l(t,ne)[o],u=c[r]||c[j],f={};if(u!==void 0&&(u.params=Object.create(null),i.push(u),n!==Re||s&&s!==Re))for(let h=0,d=u.possibleKeys.length;h<d;h++){const p=u.possibleKeys[h],g=f[u.score];u.params[p]=s!=null&&s[p]&&!g?s[p]:n[p]??(s==null?void 0:s[p]),f[u.score]=!0}}return i},vr),de,wr,Kr=(wr=class{constructor(){x(this,"name","TrieRouter");P(this,de);y(this,de,new Vr)}add(e,t,r){const n=Dt(t);if(n){for(let s=0,i=n.length;s<i;s++)l(this,de).insert(e,n[s],r);return}l(this,de).insert(e,t,r)}match(e,t){return l(this,de).search(e,t)}},de=new WeakMap,wr),ze=class extends _t{constructor(t={}){super(t),this.router=new zr({routers:[new Zn,new Kr]})}},Jn=e=>{const r={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},n=(s=>typeof s=="string"?s==="*"?()=>s:i=>s===i?i:null:typeof s=="function"?s:i=>s.includes(i)?i:null)(r.origin);return async function(i,o){var u,f;function a(h,d){i.res.headers.set(h,d)}const c=n(i.req.header("origin")||"",i);if(c&&a("Access-Control-Allow-Origin",c),r.origin!=="*"){const h=i.req.header("Vary");h?a("Vary",h):a("Vary","Origin")}if(r.credentials&&a("Access-Control-Allow-Credentials","true"),(u=r.exposeHeaders)!=null&&u.length&&a("Access-Control-Expose-Headers",r.exposeHeaders.join(",")),i.req.method==="OPTIONS"){r.maxAge!=null&&a("Access-Control-Max-Age",r.maxAge.toString()),(f=r.allowMethods)!=null&&f.length&&a("Access-Control-Allow-Methods",r.allowMethods.join(","));let h=r.allowHeaders;if(!(h!=null&&h.length)){const d=i.req.header("Access-Control-Request-Headers");d&&(h=d.split(/\s*,\s*/))}return h!=null&&h.length&&(a("Access-Control-Allow-Headers",h.join(",")),i.res.headers.append("Vary","Access-Control-Request-Headers")),i.res.headers.delete("Content-Length"),i.res.headers.delete("Content-Type"),new Response(null,{headers:i.res.headers,status:204,statusText:"No Content"})}await o()}},Xr=class extends Error{constructor(t=500,r){super(r==null?void 0:r.message,{cause:r==null?void 0:r.cause});x(this,"res");x(this,"status");this.res=r==null?void 0:r.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}},Qn=/^(GET|HEAD)$/,Yn=/^\b(application\/x-www-form-urlencoded|multipart\/form-data|text\/plain)\b/i,es=e=>{const t=(n=>(s,i)=>s===new URL(i.req.url).origin)(),r=(n,s)=>n===void 0?!1:t(n,s);return async function(s,i){if(!Qn.test(s.req.method)&&Yn.test(s.req.header("content-type")||"text/plain")&&!r(s.req.header("origin"),s)){const o=new Response("Forbidden",{status:403});throw new Xr(403,{res:o})}await i()}},ts=/^[\w!#$%&'*.^`|~+-]+$/,rs=/^[ !#-:<-[\]-~]*$/,er=(e,t)=>{if(t&&e.indexOf(t)===-1)return{};const r=e.trim().split(";"),n={};for(let s of r){s=s.trim();const i=s.indexOf("=");if(i===-1)continue;const o=s.substring(0,i).trim();if(t&&t!==o||!ts.test(o))continue;let a=s.substring(i+1).trim();if(a.startsWith('"')&&a.endsWith('"')&&(a=a.slice(1,-1)),rs.test(a)&&(n[o]=Ht(a),t))break}return n},ns=(e,t,r={})=>{let n=`${e}=${t}`;if(e.startsWith("__Secure-")&&!r.secure)throw new Error("__Secure- Cookie must have Secure attributes");if(e.startsWith("__Host-")){if(!r.secure)throw new Error("__Host- Cookie must have Secure attributes");if(r.path!=="/")throw new Error('__Host- Cookie must have Path attributes with "/"');if(r.domain)throw new Error("__Host- Cookie must not have Domain attributes")}if(r&&typeof r.maxAge=="number"&&r.maxAge>=0){if(r.maxAge>3456e4)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");n+=`; Max-Age=${r.maxAge|0}`}if(r.domain&&r.prefix!=="host"&&(n+=`; Domain=${r.domain}`),r.path&&(n+=`; Path=${r.path}`),r.expires){if(r.expires.getTime()-Date.now()>3456e7)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");n+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(n+="; HttpOnly"),r.secure&&(n+="; Secure"),r.sameSite&&(n+=`; SameSite=${r.sameSite.charAt(0).toUpperCase()+r.sameSite.slice(1)}`),r.priority&&(n+=`; Priority=${r.priority}`),r.partitioned){if(!r.secure)throw new Error("Partitioned Cookie must have Secure attributes");n+="; Partitioned"}return n},wt=(e,t,r)=>(t=encodeURIComponent(t),ns(e,t,r)),ss=(e,t,r)=>{const n=e.req.raw.headers.get("Cookie");if(typeof t=="string"){if(!n)return;let i=t;return er(n,i)[i]}return n?er(n):{}},is=(e,t,r,n)=>{let s;(n==null?void 0:n.prefix)==="secure"?s=wt("__Secure-"+t,r,{path:"/",...n,secure:!0}):(n==null?void 0:n.prefix)==="host"?s=wt("__Host-"+t,r,{...n,path:"/",secure:!0,domain:void 0}):s=wt(t,r,{path:"/",...n}),e.header("Set-Cookie",s,{append:!0})},os=e=>e?e.split(",").map((r,n)=>({value:r,index:n})).map(cs).filter(r=>!!r).sort(fs).map(({type:r,params:n,q:s})=>({type:r,params:n,q:s})):[],as=/;(?=(?:(?:[^"]*"){2})*[^"]*$)/,cs=({value:e,index:t})=>{const r=e.trim().split(as).map(o=>o.trim()),n=r[0];if(!n)return null;const s=ls(r.slice(1)),i=us(s.q);return{type:n,params:s,q:i,index:t}},ls=e=>e.reduce((t,r)=>{const[n,s]=r.split("=").map(i=>i.trim());return n&&s&&(t[n]=s),t},{}),us=e=>{if(e===void 0||e==="")return 1;if(e==="NaN")return 0;const t=Number(e);return t===1/0?1:t===-1/0?0:Number.isNaN(t)||t<0||t>1?1:t},fs=(e,t)=>{const r=t.q-e.q;return r!==0?r:e.index-t.index},tr={order:["querystring","cookie","header"],lookupQueryString:"lang",lookupCookie:"language",lookupFromHeaderKey:"accept-language",lookupFromPathIndex:0,caches:["cookie"],ignoreCase:!0,fallbackLanguage:"en",supportedLanguages:["en"],cookieOptions:{sameSite:"Strict",secure:!0,maxAge:365*24*60*60,httpOnly:!0},debug:!1};function hs(e){return os(e).map(({type:t,q:r})=>({lang:t,q:r}))}var at=(e,t)=>{if(e)try{let r=e.trim();t.convertDetectedLanguage&&(r=t.convertDetectedLanguage(r));const n=t.ignoreCase?r.toLowerCase():r,s=t.supportedLanguages.map(o=>t.ignoreCase?o.toLowerCase():o),i=s.find(o=>o===n);return i?t.supportedLanguages[s.indexOf(i)]:void 0}catch{return}},ds=(e,t)=>{try{const r=e.req.query(t.lookupQueryString);return at(r,t)}catch{return}},gs=(e,t)=>{try{const r=ss(e,t.lookupCookie);return at(r,t)}catch{return}};function ps(e,t){try{const r=e.req.header(t.lookupFromHeaderKey);if(!r)return;const n=hs(r);for(const{lang:s}of n){const i=at(s,t);if(i)return i}return}catch{return}}function ms(e,t){try{const n=e.req.path.split("/").filter(Boolean)[t.lookupFromPathIndex];return at(n,t)}catch{return}}var Gr={querystring:ds,cookie:gs,header:ps,path:ms};function ys(e){if(!e.supportedLanguages.includes(e.fallbackLanguage))throw new Error("Fallback language must be included in supported languages");if(e.lookupFromPathIndex<0)throw new Error("Path index must be non-negative");if(!e.order.every(t=>Object.keys(Gr).includes(t)))throw new Error("Invalid detector type in order array")}function vs(e,t,r){if(!(!Array.isArray(r.caches)||!r.caches.includes("cookie")))try{is(e,r.lookupCookie,t,r.cookieOptions)}catch(n){r.debug&&console.error("Failed to cache language:",n)}}var ws=(e,t)=>{let r;for(const s of t.order){const i=Gr[s];if(i)try{if(r=i(e,t),r){t.debug&&console.log(`Language detected from ${s}: ${r}`);break}}catch(o){t.debug&&console.error(`Error in ${s} detector:`,o);continue}}const n=r||t.fallbackLanguage;return r&&t.caches&&vs(e,n,t),n},xs=e=>{const t={...tr,...e,cookieOptions:{...tr.cookieOptions,...e.cookieOptions}};return ys(t),async function(n,s){try{const i=ws(n,t);n.set("language",i)}catch(i){t.debug&&console.error("Language detection failed:",i),n.set("language",t.fallbackLanguage)}await s()}};function Es(){const{process:e,Deno:t}=globalThis;return!(typeof(t==null?void 0:t.noColor)=="boolean"?t.noColor:e!==void 0?"NO_COLOR"in(e==null?void 0:e.env):!1)}var bs=e=>{const[t,r]=[",","."];return e.map(s=>s.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t)).join(r)},Ps=e=>{const t=Date.now()-e;return bs([t<1e3?t+"ms":Math.round(t/1e3)+"s"])},Os=e=>{if(Es())switch(e/100|0){case 5:return`\x1B[31m${e}\x1B[0m`;case 4:return`\x1B[33m${e}\x1B[0m`;case 3:return`\x1B[36m${e}\x1B[0m`;case 2:return`\x1B[32m${e}\x1B[0m`}return`${e}`};function rr(e,t,r,n,s=0,i){const o=t==="<--"?`${t} ${r} ${n}`:`${t} ${r} ${n} ${Os(s)} ${i}`;e(o)}var Ss=(e=console.log)=>async function(r,n){const{method:s,url:i}=r.req,o=i.slice(i.indexOf("/",8));rr(e,"<--",s,o);const a=Date.now();await n(),rr(e,"-->",s,o,r.res.status,Ps(a))},Cs=e=>{const t="pretty";return async function(n,s){var o;const i=n.req.query(t)||n.req.query(t)==="";if(await s(),i&&((o=n.res.headers.get("Content-Type"))!=null&&o.startsWith("application/json"))){const a=await n.res.json();n.res=new Response(JSON.stringify(a,null,2),n.res)}}},As={crossOriginEmbedderPolicy:["Cross-Origin-Embedder-Policy","require-corp"],crossOriginResourcePolicy:["Cross-Origin-Resource-Policy","same-origin"],crossOriginOpenerPolicy:["Cross-Origin-Opener-Policy","same-origin"],originAgentCluster:["Origin-Agent-Cluster","?1"],referrerPolicy:["Referrer-Policy","no-referrer"],strictTransportSecurity:["Strict-Transport-Security","max-age=15552000; includeSubDomains"],xContentTypeOptions:["X-Content-Type-Options","nosniff"],xDnsPrefetchControl:["X-DNS-Prefetch-Control","off"],xDownloadOptions:["X-Download-Options","noopen"],xFrameOptions:["X-Frame-Options","SAMEORIGIN"],xPermittedCrossDomainPolicies:["X-Permitted-Cross-Domain-Policies","none"],xXssProtection:["X-XSS-Protection","0"]},Rs={crossOriginEmbedderPolicy:!1,crossOriginResourcePolicy:!0,crossOriginOpenerPolicy:!0,originAgentCluster:!0,referrerPolicy:!0,strictTransportSecurity:!0,xContentTypeOptions:!0,xDnsPrefetchControl:!0,xDownloadOptions:!0,xFrameOptions:!0,xPermittedCrossDomainPolicies:!0,xXssProtection:!0,removePoweredBy:!0,permissionsPolicy:{}},ks=e=>{const t={...Rs,...e},r=$s(t),n=[];if(t.contentSecurityPolicy){const[s,i]=nr(t.contentSecurityPolicy);s&&n.push(s),r.push(["Content-Security-Policy",i])}if(t.contentSecurityPolicyReportOnly){const[s,i]=nr(t.contentSecurityPolicyReportOnly);s&&n.push(s),r.push(["Content-Security-Policy-Report-Only",i])}return t.permissionsPolicy&&Object.keys(t.permissionsPolicy).length>0&&r.push(["Permissions-Policy",js(t.permissionsPolicy)]),t.reportingEndpoints&&r.push(["Reporting-Endpoints",Ts(t.reportingEndpoints)]),t.reportTo&&r.push(["Report-To",Ns(t.reportTo)]),async function(i,o){const a=n.length===0?r:n.reduce((c,u)=>u(i,c),r);await o(),Ds(i,a),t!=null&&t.removePoweredBy&&i.res.headers.delete("X-Powered-By")}};function $s(e){return Object.entries(As).filter(([t])=>e[t]).map(([t,r])=>{const n=e[t];return typeof n=="string"?[r[0],n]:r})}function nr(e){const t=[],r=[];for(const[n,s]of Object.entries(e)){const i=Array.isArray(s)?s:[s];i.forEach((o,a)=>{if(typeof o=="function"){const c=a*2+2+r.length;t.push((u,f)=>{f[c]=o(u,n)})}}),r.push(n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(o,a)=>a?"-"+o.toLowerCase():o.toLowerCase()),...i.flatMap(o=>[" ",o]),"; ")}return r.pop(),t.length===0?[void 0,r.join("")]:[(n,s)=>s.map(i=>{if(i[0]==="Content-Security-Policy"||i[0]==="Content-Security-Policy-Report-Only"){const o=i[1].slice();return t.forEach(a=>{a(n,o)}),[i[0],o.join("")]}else return i}),r]}function js(e){return Object.entries(e).map(([t,r])=>{const n=Ls(t);if(typeof r=="boolean")return`${n}=${r?"*":"none"}`;if(Array.isArray(r)){if(r.length===0)return`${n}=()`;if(r.length===1&&(r[0]==="*"||r[0]==="none"))return`${n}=${r[0]}`;const s=r.map(i=>["self","src"].includes(i)?i:`"${i}"`);return`${n}=(${s.join(" ")})`}return""}).filter(Boolean).join(", ")}function Ls(e){return e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}function Ts(e=[]){return e.map(t=>`${t.name}="${t.url}"`).join(", ")}function Ns(e=[]){return e.map(t=>JSON.stringify(t)).join(", ")}function Ds(e,t){t.forEach(([r,n])=>{e.res.headers.set(r,n)})}var Hs=new Xr(504,{message:"Gateway Timeout"}),Ms=(e,t=Hs)=>async function(n,s){let i;const o=new Promise((a,c)=>{i=setTimeout(()=>{c(typeof t=="function"?t(n):t)},e)});try{await Promise.race([s(),o])}finally{i!==void 0&&clearTimeout(i)}},_s=()=>async function(t,r){if(await r(),t.res.status===404&&(t.req.method==="GET"||t.req.method==="HEAD")&&t.req.path!=="/"&&t.req.path.at(-1)==="/"){const n=new URL(t.req.url);n.pathname=n.pathname.substring(0,n.pathname.length-1),t.res=t.redirect(n.toString(),301)}},Ne="_hp",Is={Change:"Input",DoubleClick:"DblClick"},Fs={svg:"2000/svg",math:"1998/Math/MathML"},De=[],Rt=new WeakMap,Se=void 0,qs=()=>Se,K=e=>"t"in e,xt={onClick:["click",!1]},sr=e=>{if(!e.startsWith("on"))return;if(xt[e])return xt[e];const t=e.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(t){const[,r,n]=t;return xt[e]=[(Is[r]||r).toLowerCase(),!!n]}},ir=(e,t)=>Se&&e instanceof SVGElement&&/[A-Z]/.test(t)&&(t in e.style||t.match(/^(?:o|pai|str|u|ve)/))?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Bs=(e,t,r)=>{var n;t||(t={});for(let s in t){const i=t[s];if(s!=="children"&&(!r||r[s]!==i)){s=st(s);const o=sr(s);if(o){if((r==null?void 0:r[s])!==i&&(r&&e.removeEventListener(o[0],r[s],o[1]),i!=null)){if(typeof i!="function")throw new Error(`Event handler for "${s}" is not a function`);e.addEventListener(o[0],i,o[1])}}else if(s==="dangerouslySetInnerHTML"&&i)e.innerHTML=i.__html;else if(s==="ref"){let a;typeof i=="function"?a=i(e)||(()=>i(null)):i&&"current"in i&&(i.current=e,a=()=>i.current=null),Rt.set(e,a)}else if(s==="style"){const a=e.style;typeof i=="string"?a.cssText=i:(a.cssText="",i!=null&&Tr(i,a.setProperty.bind(a)))}else{if(s==="value"){const c=e.nodeName;if(c==="INPUT"||c==="TEXTAREA"||c==="SELECT"){if(e.value=i==null||i===!1?null:i,c==="TEXTAREA"){e.textContent=i;continue}else if(c==="SELECT"){e.selectedIndex===-1&&(e.selectedIndex=0);continue}}}else(s==="checked"&&e.nodeName==="INPUT"||s==="selected"&&e.nodeName==="OPTION")&&(e[s]=i);const a=ir(e,s);i==null||i===!1?e.removeAttribute(a):i===!0?e.setAttribute(a,""):typeof i=="string"||typeof i=="number"?e.setAttribute(a,i):e.setAttribute(a,i.toString())}}}if(r)for(let s in r){const i=r[s];if(s!=="children"&&!(s in t)){s=st(s);const o=sr(s);o?e.removeEventListener(o[0],i,o[1]):s==="ref"?(n=Rt.get(e))==null||n():e.removeAttribute(ir(e,s))}}},Us=(e,t)=>{t[k][0]=0,De.push([e,t]);const r=t.tag[Lt]||t.tag,n=r.defaultProps?{...r.defaultProps,...t.props}:t.props;try{return[r.call(null,n)]}finally{De.pop()}},Zr=(e,t,r,n,s)=>{var i,o;(i=e.vR)!=null&&i.length&&(n.push(...e.vR),delete e.vR),typeof e.tag=="function"&&((o=e[k][1][en])==null||o.forEach(a=>s.push(a))),e.vC.forEach(a=>{var c;if(K(a))r.push(a);else if(typeof a.tag=="function"||a.tag===""){a.c=t;const u=r.length;if(Zr(a,t,r,n,s),a.s){for(let f=u;f<r.length;f++)r[f].s=!0;a.s=!1}}else r.push(a),(c=a.vR)!=null&&c.length&&(n.push(...a.vR),delete a.vR)})},Ws=e=>{for(;;e=e.tag===Ne||!e.vC||!e.pP?e.nN:e.vC[0]){if(!e)return null;if(e.tag!==Ne&&e.e)return e.e}},Jr=e=>{var t,r,n,s,i,o;K(e)||((r=(t=e[k])==null?void 0:t[1][en])==null||r.forEach(a=>{var c;return(c=a[2])==null?void 0:c.call(a)}),(n=Rt.get(e.e))==null||n(),e.p===2&&((s=e.vC)==null||s.forEach(a=>a.p=2)),(i=e.vC)==null||i.forEach(Jr)),e.p||((o=e.e)==null||o.remove(),delete e.e),typeof e.tag=="function"&&(ke.delete(e),et.delete(e),delete e[k][3],e.a=!0)},Qr=(e,t,r)=>{e.c=t,Yr(e,t,r)},or=(e,t)=>{if(t){for(let r=0,n=e.length;r<n;r++)if(e[r]===t)return r}},ar=Symbol(),Yr=(e,t,r)=>{var u;const n=[],s=[],i=[];Zr(e,t,n,s,i),s.forEach(Jr);const o=r?void 0:t.childNodes;let a,c=null;if(r)a=-1;else if(!o.length)a=0;else{const f=or(o,Ws(e.nN));f!==void 0?(c=o[f],a=f):a=or(o,(u=n.find(h=>h.tag!==Ne&&h.e))==null?void 0:u.e)??-1,a===-1&&(r=!0)}for(let f=0,h=n.length;f<h;f++,a++){const d=n[f];let p;if(d.s&&d.e)p=d.e,d.s=!1;else{const g=r||!d.e;K(d)?(d.e&&d.d&&(d.e.textContent=d.t),d.d=!1,p=d.e||(d.e=document.createTextNode(d.t))):(p=d.e||(d.e=d.n?document.createElementNS(d.n,d.tag):document.createElement(d.tag)),Bs(p,d.props,d.pP),Yr(d,p,g))}d.tag===Ne?a--:r?p.parentNode||t.appendChild(p):o[a]!==p&&o[a-1]!==p&&(o[a+1]===p?t.appendChild(o[a]):t.insertBefore(p,c||o[a]||null))}if(e.pP&&delete e.pP,i.length){const f=[],h=[];i.forEach(([,d,,p,g])=>{d&&f.push(d),p&&h.push(p),g==null||g()}),f.forEach(d=>d()),h.length&&requestAnimationFrame(()=>{h.forEach(d=>d())})}},zs=(e,t)=>!!(e&&e.length===t.length&&e.every((r,n)=>r[1]===t[n][1])),et=new WeakMap,kt=(e,t,r)=>{var i,o,a,c,u,f;const n=!r&&t.pC;r&&(t.pC||(t.pC=t.vC));let s;try{r||(r=typeof t.tag=="function"?Us(e,t):Be(t.props.children)),((i=r[0])==null?void 0:i.tag)===""&&r[0][St]&&(s=r[0][St],e[5].push([e,s,t]));const h=n?[...t.pC]:t.vC?[...t.vC]:void 0,d=[];let p;for(let g=0;g<r.length;g++){Array.isArray(r[g])&&r.splice(g,1,...r[g].flat());let w=Vs(r[g]);if(w){typeof w.tag=="function"&&!w.tag[Ar]&&(Oe.length>0&&(w[k][2]=Oe.map(E=>[E,E.values.at(-1)])),(o=e[5])!=null&&o.length&&(w[k][3]=e[5].at(-1)));let m;if(h&&h.length){const E=h.findIndex(K(w)?b=>K(b):w.key!==void 0?b=>b.key===w.key&&b.tag===w.tag:b=>b.tag===w.tag);E!==-1&&(m=h[E],h.splice(E,1))}if(m)if(K(w))m.t!==w.t&&(m.t=w.t,m.d=!0),w=m;else{const E=m.pP=m.props;if(m.props=w.props,m.f||(m.f=w.f||t.f),typeof w.tag=="function"){const b=m[k][2];m[k][2]=w[k][2]||[],m[k][3]=w[k][3],!m.f&&((m.o||m)===w.o||(c=(a=m.tag)[yn])!=null&&c.call(a,E,m.props))&&zs(b,m[k][2])&&(m.s=!0)}w=m}else if(!K(w)&&Se){const E=Ae(Se);E&&(w.n=E)}if(!K(w)&&!w.s&&(kt(e,w),delete w.f),d.push(w),p&&!p.s&&!w.s)for(let E=p;E&&!K(E);E=(u=E.vC)==null?void 0:u.at(-1))E.nN=w;p=w}}t.vR=n?[...t.vC,...h||[]]:h||[],t.vC=d,n&&delete t.pC}catch(h){if(t.f=!0,h===ar){if(s)return;throw h}const[d,p,g]=((f=t[k])==null?void 0:f[3])||[];if(p){const w=()=>tt([0,!1,e[2]],g),m=et.get(g)||[];m.push(w),et.set(g,m);const E=p(h,()=>{const b=et.get(g);if(b){const S=b.indexOf(w);if(S!==-1)return b.splice(S,1),w()}});if(E){if(e[0]===1)e[1]=!0;else if(kt(e,g,[E]),(p.length===1||e!==d)&&g.c){Qr(g,g.c,!1);return}throw ar}}throw h}finally{s&&e[5].pop()}},Vs=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return{t:e.toString(),d:!0};if("vR"in e&&(e={tag:e.tag,props:e.props,key:e.key,f:e.f,type:e.tag,ref:e.props.ref,o:e.o||e}),typeof e.tag=="function")e[k]=[0,[]];else{const t=Fs[e.tag];t&&(Se||(Se=kr("")),e.props.children=[{tag:Se,props:{value:e.n=`http://www.w3.org/${t}`,children:e.props.children}}])}return e}},cr=(e,t)=>{var r,n;(r=t[k][2])==null||r.forEach(([s,i])=>{s.values.push(i)});try{kt(e,t,void 0)}catch{return}if(t.a){delete t.a;return}(n=t[k][2])==null||n.forEach(([s])=>{s.values.pop()}),(e[0]!==1||!e[1])&&Qr(t,t.c,!1)},ke=new WeakMap,lr=[],tt=async(e,t)=>{e[5]||(e[5]=[]);const r=ke.get(t);r&&r[0](void 0);let n;const s=new Promise(i=>n=i);if(ke.set(t,[n,()=>{e[2]?e[2](e,t,i=>{cr(i,t)}).then(()=>n(t)):(cr(e,t),n(t))}]),lr.length)lr.at(-1).add(t);else{await Promise.resolve();const i=ke.get(t);i&&(ke.delete(t),i[1]())}return s},Ks=(e,t,r)=>({tag:Ne,props:{children:e},key:r,e:t,p:1}),Et=0,en=1,bt=2,Pt=3,Ot=new WeakMap,tn=(e,t)=>!e||!t||e.length!==t.length||t.some((r,n)=>r!==e[n]),Xs=void 0,ur=[],Gs=e=>{var o;const t=()=>typeof e=="function"?e():e,r=De.at(-1);if(!r)return[t(),()=>{}];const[,n]=r,s=(o=n[k][1])[Et]||(o[Et]=[]),i=n[k][0]++;return s[i]||(s[i]=[t(),a=>{const c=Xs,u=s[i];if(typeof a=="function"&&(a=a(u[0])),!Object.is(a,u[0]))if(u[0]=a,ur.length){const[f,h]=ur.at(-1);Promise.all([f===3?n:tt([f,!1,c],n),h]).then(([d])=>{if(!d||!(f===2||f===3))return;const p=d.vC;requestAnimationFrame(()=>{setTimeout(()=>{p===d.vC&&tt([f===3?1:0,!1,c],d)})})})}else tt([0,!1,c],n)}])},It=(e,t)=>{var a;const r=De.at(-1);if(!r)return e;const[,n]=r,s=(a=n[k][1])[bt]||(a[bt]=[]),i=n[k][0]++,o=s[i];return tn(o==null?void 0:o[1],t)?s[i]=[e,t]:e=s[i][0],e},Zs=e=>{const t=Ot.get(e);if(t){if(t.length===2)throw t[1];return t[0]}throw e.then(r=>Ot.set(e,[r]),r=>Ot.set(e,[void 0,r])),e},Js=(e,t)=>{var a;const r=De.at(-1);if(!r)return e();const[,n]=r,s=(a=n[k][1])[Pt]||(a[Pt]=[]),i=n[k][0]++,o=s[i];return tn(o==null?void 0:o[1],t)&&(s[i]=[e(),t]),s[i][0]},Qs=kr({pending:!1,data:null,method:null,action:null}),fr=new Set,Ys=e=>{fr.add(e),e.finally(()=>fr.delete(e))},Ft=(e,t)=>Js(()=>r=>{let n;e&&(typeof e=="function"?n=e(r)||(()=>{e(null)}):e&&"current"in e&&(e.current=r,n=()=>{e.current=null}));const s=t(r);return()=>{s==null||s(),n==null||n()}},[e]),me=Object.create(null),Xe=Object.create(null),Ve=(e,t,r,n,s)=>{if(t!=null&&t.itemProp)return{tag:e,props:t,type:e,ref:t.ref};const i=document.head;let{onLoad:o,onError:a,precedence:c,blocking:u,...f}=t,h=null,d=!1;const p=Ge[e];let g;if(p.length>0){const b=i.querySelectorAll(e);e:for(const S of b)for(const C of Ge[e])if(S.getAttribute(C)===t[C]){h=S;break e}if(!h){const S=p.reduce((C,A)=>t[A]===void 0?C:`${C}-${A}-${t[A]}`,e);d=!Xe[S],h=Xe[S]||(Xe[S]=(()=>{const C=document.createElement(e);for(const A of p)t[A]!==void 0&&C.setAttribute(A,t[A]),t.rel&&C.setAttribute("rel",t.rel);return C})())}}else g=i.querySelectorAll(e);c=n?c??"":void 0,n&&(f[Ze]=c);const w=It(b=>{if(p.length>0){let S=!1;for(const C of i.querySelectorAll(e)){if(S&&C.getAttribute(Ze)!==c){i.insertBefore(b,C);return}C.getAttribute(Ze)===c&&(S=!0)}i.appendChild(b)}else if(g){let S=!1;for(const C of g)if(C===b){S=!0;break}S||i.insertBefore(b,i.contains(g[0])?g[0]:i.querySelector(e)),g=void 0}},[c]),m=Ft(t.ref,b=>{var A;const S=p[0];if(r===2&&(b.innerHTML=""),(d||g)&&w(b),!a&&!o)return;let C=me[A=b.getAttribute(S)]||(me[A]=new Promise((ae,ce)=>{b.addEventListener("load",ae),b.addEventListener("error",ce)}));o&&(C=C.then(o)),a&&(C=C.catch(a)),C.catch(()=>{})});if(s&&u==="render"){const b=Ge[e][0];if(t[b]){const S=t[b],C=me[S]||(me[S]=new Promise((A,ae)=>{w(h),h.addEventListener("load",A),h.addEventListener("error",ae)}));Zs(C)}}const E={tag:e,type:e,props:{...f,ref:m},ref:m};return E.p=r,h&&(E.e=h),Ks(E,i)},ei=e=>{const t=qs(),r=t&&Ae(t);return r!=null&&r.endsWith("svg")?{tag:"title",props:e,type:"title",ref:e.ref}:Ve("title",e,void 0,!1,!1)},ti=e=>!e||["src","async"].some(t=>!e[t])?{tag:"script",props:e,type:"script",ref:e.ref}:Ve("script",e,1,!1,!0),ri=e=>!e||!["href","precedence"].every(t=>t in e)?{tag:"style",props:e,type:"style",ref:e.ref}:(e["data-href"]=e.href,delete e.href,Ve("style",e,2,!0,!0)),ni=e=>!e||["onLoad","onError"].some(t=>t in e)||e.rel==="stylesheet"&&(!("precedence"in e)||"disabled"in e)?{tag:"link",props:e,type:"link",ref:e.ref}:Ve("link",e,1,"precedence"in e,!0),si=e=>Ve("meta",e,void 0,!1,!1),rn=Symbol(),ii=e=>{const{action:t,...r}=e;typeof t!="function"&&(r.action=t);const[n,s]=Gs([null,!1]),i=It(async u=>{const f=u.isTrusted?t:u.detail[rn];if(typeof f!="function")return;u.preventDefault();const h=new FormData(u.target);s([h,!0]);const d=f(h);d instanceof Promise&&(Ys(d),await d),s([null,!0])},[]),o=Ft(e.ref,u=>(u.addEventListener("submit",i),()=>{u.removeEventListener("submit",i)})),[a,c]=n;return n[1]=!1,{tag:Qs,props:{value:{pending:a!==null,data:a,method:a?"post":null,action:a?t:null},children:{tag:"form",props:{...r,ref:o},type:"form",ref:o}},f:c}},nn=(e,{formAction:t,...r})=>{if(typeof t=="function"){const n=It(s=>{s.preventDefault(),s.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[rn]:t}}))},[]);r.ref=Ft(r.ref,s=>(s.addEventListener("click",n),()=>{s.removeEventListener("click",n)}))}return{tag:e,props:r,type:e,ref:r.ref}},oi=e=>nn("input",e),ai=e=>nn("button",e);Object.assign(Ct,{title:ei,script:ti,style:ri,link:ni,meta:si,form:ii,input:oi,button:ai});new TextEncoder;var ci=$r(null),li=(e,t,r,n)=>(s,i)=>{const o="<!DOCTYPE html>",a=r?Xt(u=>r(u,e),{Layout:t,...i},s):s,c=mn`${I(o)}${Xt(ci.Provider,{value:e},a)}`;return e.html(c)},ui=(e,t)=>function(n,s){const i=n.getLayout()??Dr;return e&&n.setLayout(o=>e({...o,Layout:i},n)),n.setRenderer(li(n,i,e)),s()};const fi=ui(({children:e})=>v("html",{children:[v("head",{children:v("link",{href:"/assets/style.css",rel:"stylesheet"})}),v("body",{children:e})]})),qt=(e,t=void 0)=>v("html",{children:[v("head",{children:v("title",{children:["Umaxica | ",t]})}),v("body",{children:[v("header",{children:v("h1",{children:"Umaxica(app, edge)"})}),v("hr",{}),e.children,v("hr",{}),v("footer",{children:v("p",{children:"© umaxica"})})]})]}),ct=new ze,Bt=()=>v("nav",{children:[v("a",{href:"/",children:"Home"})," | ",v("a",{href:"/about",children:"About"})," | ",v("a",{href:"/contact",children:"Contact"})]});ct.get("/",e=>e.html(v(qt,{title:"Home",children:[v(Bt,{}),v("h2",{children:"Welcome to umaxica"}),v("p",{children:"This is the home page."})]})));ct.get("/about",e=>e.html(v(qt,{title:"About",children:[v(Bt,{}),v("h2",{children:"About"}),v("p",{children:"About page of umaxica"})]})));ct.get("/contact",e=>e.html(v(qt,{title:"Contact",children:[v(Bt,{}),v("h2",{children:"Contact"}),v("p",{children:"Contact us at contact@umaxica.app"})]})));const hi=(e,t=void 0)=>v("html",{children:[v("head",{children:v("title",{children:["Umaxica | ",t]})}),v("body",{children:[v("header",{children:v("h1",{children:"Umaxica(com, edge)"})}),v("hr",{}),e.children,v("hr",{}),v("footer",{children:v("p",{children:"© umaxica"})})]})]}),lt=new ze;lt.get("/",e=>e.html(v(hi,{title:"umaxica",children:"Welcome to umaxica"})));lt.get("/",e=>e.html("home page of umaxica"));lt.get("/about",e=>e.html("About page of umaxica"));const di=(e,t=void 0)=>v("html",{children:[v("head",{children:v("title",{children:["Umaxica | ",t]})}),v("body",{children:[v("header",{children:v("h1",{children:"Umaxica(org, edge)"})}),v("hr",{}),e.children,v("hr",{}),v("footer",{children:v("p",{children:"© umaxica"})})]})]}),ut=new ze;ut.get("/",e=>e.html(v(di,{title:"umaxica",children:"Welcome to umaxica"})));ut.get("/",e=>e.html("home page of umaxica"));ut.get("/about",e=>e.html("About page of umaxica"));const ft=new ze;ft.get("*",e=>(console.log(e.req.url),e.req.url.match(/umaxica.com/)?e.redirect("https://jp.umaxica.com",301):e.req.url.match(/umaxica.org/)?e.redirect("https://jp.umaxica.org",301):e.redirect("https://jp.umaxica.app",301)));const T=new ze({getPath:e=>e.url.replace(/^https?:\/([^?]+).*$/,"$1")});T.use(xs({supportedLanguages:["en","ja"],fallbackLanguage:"ja"}));T.use(es());T.use(Jn());T.use(Ss());T.use(Cs());T.use(_s());T.use(ks());T.use(fi);T.use(Ms(2e3));["/app.localdomain:4444/","/jp.umaxica.app/"].forEach(e=>T.route(e,ct));["/com.localdomain:4444/","/jp.umaxica.com/"].forEach(e=>T.route(e,lt));["/org.localdomain:4444/","/jp.umaxica.org/"].forEach(e=>T.route(e,ut));T.route("/umaxica.org/",ft);T.route("/umaxica.com/",ft);T.route("/umaxica.app/",ft);T.notFound(e=>e.html(v(Dr,{children:[v("h1",{children:"404 Page Not Found"}),v("hr",{}),v("p",{children:"..."})]}),404));T.onError((e,t)=>{t.html("<h1>500 Internal Server Error</h1>",500),console.error(e)});var it="[^/]+",je=".*",Le="(?:|/.*)",$e=Symbol(),gi=new Set(".\\+*[^]$()");function pi(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===je||e===Le?1:t===je||t===Le?-1:e===it?1:t===it?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var ge,pe,U,xr,$t=(xr=class{constructor(){P(this,ge);P(this,pe);P(this,U,Object.create(null))}insert(e,t,r,n,s){if(e.length===0){if(l(this,ge)!==void 0)throw $e;if(s)return;y(this,ge,t);return}const[i,...o]=e,a=i==="*"?o.length===0?["","",je]:["","",it]:i==="/*"?["","",Le]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let c;if(a){const u=a[1];let f=a[2]||it;if(u&&a[2]&&(f=f.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(f)))throw $e;if(c=l(this,U)[f],!c){if(Object.keys(l(this,U)).some(h=>h!==je&&h!==Le))throw $e;if(s)return;c=l(this,U)[f]=new $t,u!==""&&y(c,pe,n.varIndex++)}!s&&u!==""&&r.push([u,l(c,pe)])}else if(c=l(this,U)[i],!c){if(Object.keys(l(this,U)).some(u=>u.length>1&&u!==je&&u!==Le))throw $e;if(s)return;c=l(this,U)[i]=new $t}c.insert(o,t,r,n,s)}buildRegExpStr(){const t=Object.keys(l(this,U)).sort(pi).map(r=>{const n=l(this,U)[r];return(typeof l(n,pe)=="number"?`(${r})@${l(n,pe)}`:gi.has(r)?`\\${r}`:r)+n.buildRegExpStr()});return typeof l(this,ge)=="number"&&t.unshift(`#${l(this,ge)}`),t.length===0?"":t.length===1?t[0]:"(?:"+t.join("|")+")"}},ge=new WeakMap,pe=new WeakMap,U=new WeakMap,xr),ot,qe,Er,mi=(Er=class{constructor(){P(this,ot,{varIndex:0});P(this,qe,new $t)}insert(e,t,r){const n=[],s=[];for(let o=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,c=>{const u=`@\\${o}`;return s[o]=[u,c],o++,a=!0,u}),!a)break}const i=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let o=s.length-1;o>=0;o--){const[a]=s[o];for(let c=i.length-1;c>=0;c--)if(i[c].indexOf(a)!==-1){i[c]=i[c].replace(a,s[o][1]);break}}return l(this,qe).insert(i,t,n,l(this,ot),r),n}buildRegExp(){let e=l(this,qe).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const r=[],n=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(s,i,o)=>i!==void 0?(r[++t]=Number(i),"$()"):(o!==void 0&&(n[Number(o)]=++t),"")),[new RegExp(`^${e}`),r,n]}},ot=new WeakMap,qe=new WeakMap,Er),sn=[],yi=[/^$/,[],Object.create(null)],rt=Object.create(null);function on(e){return rt[e]??(rt[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`))}function vi(){rt=Object.create(null)}function wi(e){var u;const t=new mi,r=[];if(e.length===0)return yi;const n=e.map(f=>[!/\*|\/:/.test(f[0]),...f]).sort(([f,h],[d,p])=>f?1:d?-1:h.length-p.length),s=Object.create(null);for(let f=0,h=-1,d=n.length;f<d;f++){const[p,g,w]=n[f];p?s[g]=[w.map(([E])=>[E,Object.create(null)]),sn]:h++;let m;try{m=t.insert(g,h,p)}catch(E){throw E===$e?new Mt(g):E}p||(r[h]=w.map(([E,b])=>{const S=Object.create(null);for(b-=1;b>=0;b--){const[C,A]=m[b];S[C]=A}return[E,S]}))}const[i,o,a]=t.buildRegExp();for(let f=0,h=r.length;f<h;f++)for(let d=0,p=r[f].length;d<p;d++){const g=(u=r[f][d])==null?void 0:u[1];if(!g)continue;const w=Object.keys(g);for(let m=0,E=w.length;m<E;m++)g[w[m]]=a[g[w[m]]]}const c=[];for(const f in o)c[f]=r[o[f]];return[i,c,s]}function ye(e,t){if(e){for(const r of Object.keys(e).sort((n,s)=>s.length-n.length))if(on(r).test(t))return[...e[r]]}}var se,ie,Ce,an,cn,br,xi=(br=class{constructor(){P(this,Ce);x(this,"name","RegExpRouter");P(this,se);P(this,ie);y(this,se,{[j]:Object.create(null)}),y(this,ie,{[j]:Object.create(null)})}add(e,t,r){var a;const n=l(this,se),s=l(this,ie);if(!n||!s)throw new Error(Ur);n[e]||[n,s].forEach(c=>{c[e]=Object.create(null),Object.keys(c[j]).forEach(u=>{c[e][u]=[...c[j][u]]})}),t==="/*"&&(t="*");const i=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const c=on(t);e===j?Object.keys(n).forEach(u=>{var f;(f=n[u])[t]||(f[t]=ye(n[u],t)||ye(n[j],t)||[])}):(a=n[e])[t]||(a[t]=ye(n[e],t)||ye(n[j],t)||[]),Object.keys(n).forEach(u=>{(e===j||e===u)&&Object.keys(n[u]).forEach(f=>{c.test(f)&&n[u][f].push([r,i])})}),Object.keys(s).forEach(u=>{(e===j||e===u)&&Object.keys(s[u]).forEach(f=>c.test(f)&&s[u][f].push([r,i]))});return}const o=Dt(t)||[t];for(let c=0,u=o.length;c<u;c++){const f=o[c];Object.keys(s).forEach(h=>{var d;(e===j||e===h)&&((d=s[h])[f]||(d[f]=[...ye(n[h],f)||ye(n[j],f)||[]]),s[h][f].push([r,i-u+c+1]))})}}match(e,t){vi();const r=O(this,Ce,an).call(this);return this.match=(n,s)=>{const i=r[n]||r[j],o=i[2][s];if(o)return o;const a=s.match(i[0]);if(!a)return[[],sn];const c=a.indexOf("",1);return[i[1][c],a]},this.match(e,t)}},se=new WeakMap,ie=new WeakMap,Ce=new WeakSet,an=function(){const e=Object.create(null);return Object.keys(l(this,ie)).concat(Object.keys(l(this,se))).forEach(t=>{e[t]||(e[t]=O(this,Ce,cn).call(this,t))}),y(this,se,y(this,ie,void 0)),e},cn=function(e){const t=[];let r=e===j;return[l(this,se),l(this,ie)].forEach(n=>{const s=n[e]?Object.keys(n[e]).map(i=>[i,n[e][i]]):[];s.length!==0?(r||(r=!0),t.push(...s)):e!==j&&t.push(...Object.keys(n[j]).map(i=>[i,n[j][i]]))}),r?wi(t):null},br),Ei=class extends _t{constructor(e={}){super(e),this.router=e.router??new zr({routers:[new xi,new Kr]})}};const jt=new Ei,ln=Object.assign({"/src/index.tsx":T});let un=!1;for(const[,e]of Object.entries(ln))e&&(jt.all("*",t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),jt.notFound(t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),un=!0);if(!un)throw new Error("Can't import modules from ['/src/index.ts','/src/index.tsx','/app/server.ts']");const fn={},hr=new Set;for(const[e,t]of Object.entries(ln))for(const[r,n]of Object.entries(t))if(r!=="fetch"){if(hr.has(r))throw new Error(`Handler "${r}" is defined in multiple entry files. Please ensure each handler (except fetch) is defined only once.`);hr.add(r),fn[r]=n}const Ai={...fn,fetch:jt.fetch};export{Ai as default};
